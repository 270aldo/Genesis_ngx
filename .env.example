# Genesis NGX - Environment Variables Template
# Copy this file to .env.local for local development
# DO NOT commit .env.local or any file with real secrets

# ============================================================================
# Environment
# ============================================================================
ENVIRONMENT=development  # development, staging, production

# ============================================================================
# Google Cloud Platform
# ============================================================================
GOOGLE_CLOUD_PROJECT=your-gcp-project-id
GOOGLE_CLOUD_REGION=us-central1
GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account-key.json

# ============================================================================
# Vertex AI / Gemini
# ============================================================================
GEMINI_PROJECT_ID=your-gcp-project-id
GEMINI_LOCATION=us-central1
GEMINI_DEFAULT_MODEL=gemini-2.0-flash-exp  # or gemini-2.5-pro, gemini-2.5-flash-lite

# Gemini Configuration
GEMINI_MAX_RETRIES=3
GEMINI_TIMEOUT_SECONDS=30
GEMINI_ENABLE_CACHING=true
GEMINI_CACHE_TTL_HOURS=1

# Cost Control
GEMINI_MAX_COST_PER_REQUEST=0.05
GEMINI_DAILY_BUDGET_USD=10.0

# ============================================================================
# Supabase
# ============================================================================
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key-here
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# Supabase Configuration
SUPABASE_DB_SCHEMA=public
SUPABASE_MAX_CONNECTIONS=10
SUPABASE_CONNECTION_TIMEOUT=10

# ============================================================================
# Authentication & Security
# ============================================================================
# JWT Configuration
JWT_SECRET_KEY=your-super-secret-jwt-key-change-this-in-production
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=60

# OIDC for Agent-to-Agent
OIDC_ISSUER=https://accounts.google.com
OIDC_AUDIENCE=nexus-orchestrator
OIDC_JWKS_URL=https://www.googleapis.com/oauth2/v3/certs

# API Keys (para testing local, usar Secret Manager en prod)
API_KEY_HEADER=X-API-Key
API_KEY_VALUE=dev-api-key-12345

# ============================================================================
# Service Configuration
# ============================================================================
# NEXUS Orchestrator
NEXUS_HOST=0.0.0.0
NEXUS_PORT=8080
NEXUS_RELOAD=true  # Only for development

# Agent URLs (para A2A)
AGENT_FITNESS_URL=http://localhost:8081
AGENT_NUTRITION_URL=http://localhost:8082
AGENT_MENTAL_HEALTH_URL=http://localhost:8083

# ============================================================================
# Logging & Monitoring
# ============================================================================
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FORMAT=json  # json or console
LOG_TO_CLOUD=false  # true en staging/prod

# Structured Logging
LOG_REQUEST_BODY=false  # Cuidado con PII/PHI
LOG_RESPONSE_BODY=false
LOG_HEADERS=false

# OpenTelemetry
OTEL_ENABLED=false  # true en staging/prod
OTEL_SERVICE_NAME=genesis-ngx
OTEL_EXPORTER_GCP_PROJECT_ID=your-gcp-project-id

# ============================================================================
# A2A Protocol Configuration
# ============================================================================
A2A_VERSION=0.3
A2A_TIMEOUT_SECONDS=30
A2A_MAX_RETRIES=3
A2A_RETRY_BACKOFF_SECONDS=2

# Budget Headers
A2A_DEFAULT_BUDGET_USD=0.01
A2A_ENABLE_BUDGET_ENFORCEMENT=true

# ============================================================================
# Rate Limiting
# ============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_BURST=10

# ============================================================================
# Database (para desarrollo local con Supabase local)
# ============================================================================
DATABASE_URL=postgresql://postgres:postgres@localhost:54322/postgres
DATABASE_POOL_SIZE=10
DATABASE_MAX_OVERFLOW=20

# ============================================================================
# Redis (para caché y rate limiting)
# ============================================================================
REDIS_URL=redis://localhost:6379/0
REDIS_MAX_CONNECTIONS=10
REDIS_SOCKET_TIMEOUT=5

# ============================================================================
# Feature Flags
# ============================================================================
ENABLE_RAG=false  # Habilitar RAG con pgvector
ENABLE_REALTIME=true  # Supabase Realtime
ENABLE_STREAMING=true  # SSE Streaming
ENABLE_CACHING=true  # Response caching
ENABLE_METRICS=true  # Custom metrics

# ============================================================================
# Development Tools
# ============================================================================
DEBUG=false  # true solo en local
RELOAD=true  # Hot reload en desarrollo
WORKERS=1  # Número de workers de uvicorn

# ============================================================================
# Testing
# ============================================================================
TEST_MODE=false
MOCK_GEMINI=false  # Usar mock en vez de Gemini real
MOCK_SUPABASE=false  # Usar mock en vez de Supabase real

# ============================================================================
# CORS (para frontend)
# ============================================================================
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:19006
CORS_ALLOW_CREDENTIALS=true
CORS_MAX_AGE=600
